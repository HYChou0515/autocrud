// Auto-generated by AutoCRUD Web Generator
import { createFileRoute, useNavigate } from '@tanstack/react-router';
import { ResourceDetail } from '../../../lib/components/ResourceDetail';
import { getResource } from '../../../lib/resources';
import type { Skill } from '../../../generated/types';

type DetailSearch = { revision?: string };

export const Route = createFileRoute('/autocrud-admin/skill/$resourceId')({
  component: DetailPage,
  validateSearch: (search: Record<string, unknown>): DetailSearch => ({
    revision: typeof search.revision === 'string' ? search.revision : undefined,
  }),
});

function DetailPage() {
  const { resourceId } = Route.useParams();
  const { revision } = Route.useSearch();
  const navigate = useNavigate({ from: '/autocrud-admin/skill/$resourceId' });

  const config = getResource('skill')!;

  const handleRevisionChange = (rev: string | null) => {
    navigate({
      search: { revision: rev ?? undefined },
      replace: true,
    });
  };

  return (
    <ResourceDetail<Skill>
      config={config}
      resourceId={resourceId}
      basePath="/autocrud-admin/skill"
      initialRevision={revision}
      onRevisionChange={handleRevisionChange}
    />
  );
}
